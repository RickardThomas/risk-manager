{"ast":null,"code":"import _slicedToArray from \"/Users/tom/Desktop/interfacing/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/tom/Desktop/interfacing/src/Components/Alerts.jsx\";\nimport React from 'react';\nimport moment from \"moment\";\nimport './Apping.css';\nimport './orderbook.css';\nimport './pricealert.css';\nimport { useState, useRef } from 'react';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ORDER\":\n      return [...state, action.payload];\n\n    default:\n      return state;\n  }\n}\n\nfunction Alerts() {\n  const inputRef = React.useRef();\n\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        alertReminders = _React$useState2[0],\n        setAlertReminders = _React$useState2[1];\n\n  const _React$useReducer = React.useReducer(reducer, []),\n        _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n        orders = _React$useReducer2[0],\n        dispatch = _React$useReducer2[1]; // const [isShake, setShake] = useState(true)\n\n\n  const addAlert = () => {\n    const input = inputRef.current;\n    const alertPrice = input.value;\n    setAlertReminders([...alertReminders, alertPrice]);\n    input.value = '';\n  };\n\n  const removeAlert = i => {\n    const newAlerts = alertReminders.filter((_, alertIndex) => alertIndex !== i);\n    setAlertReminders(newAlerts);\n  };\n\n  React.useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(JSON.stringify({\n        event: \"subscribe\",\n        channel: \"trades\",\n        pair: \"tBTCUSD\"\n      }));\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      var isAnOrder = response[1] === \"tu\";\n\n      if (isAnOrder) {\n        const time = moment().format(\"HH:mm:ss\");\n        const price = response[5].toFixed(1);\n        const amount = response[6].toFixed(5);\n        const order = {\n          time,\n          price,\n          amount\n        };\n        dispatch({\n          type: \"ADD_ORDER\",\n          payload: order\n        });\n        return () => ws.close(1000, 'Deliberate disconnection');\n      }\n    };\n  }, []); // orders.forEach(element => { console.log('the price', element.price, element) })\n\n  const heady = useRef();\n  let newPrice = ''; // 2-d array\n\n  orders.forEach(p => {\n    alertReminders.forEach(j => {\n      if (p.price - j < 100) {\n        console.log(j);\n        console.log(p.price);\n        heady.current.className = 'fa fa-bell shake'; //       console.log(heady.current.className)\n        // window.alert(\"the price is\");\n        // heady.current.style.animation = 'shaking 0.5s'\n        // heady.current.style.transition = 'width 300px';\n        // heady.current.style.color =  'red'\n      }\n    });\n  });\n\n  if (orders.length > 9) {\n    orders.length = orders.length - 1;\n  }\n\n  ;\n  const bell = heady.current.className = 'fa fa-bell';\n  return React.createElement(\"div\", {\n    className: \"orders-Alerts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    ref: heady,\n    className: bell,\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, newPrice, \" \")), React.createElement(\"div\", {\n    className: \"Alertbox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Add Alert\"), React.createElement(\"input\", {\n    className: \"Myinput\",\n    ref: inputRef,\n    placeholder: \" price for alert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"Addbtn\",\n    onClick: addAlert,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Add\")), React.createElement(\"ul\", {\n    className: \"Inneralert\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, alertReminders.reverse().map((alert, i) => React.createElement(\"li\", {\n    className: \"Myli\",\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, alert, React.createElement(\"button\", {\n    className: \"Removebtn\",\n    onClick: () => removeAlert(i),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"x\"))))), React.createElement(\"div\", {\n    className: \"Orderbook\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \" Bitfinex BTC order book\"), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Time \"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Amount\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, orders.reverse().map(({\n    time,\n    price,\n    amount\n  }, i) => React.createElement(\"tr\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \" \", time, \" \"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, price), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, amount)))))));\n}\n\nexport default Alerts;","map":{"version":3,"sources":["/Users/tom/Desktop/interfacing/src/Components/Alerts.jsx"],"names":["React","moment","useState","useRef","reducer","state","action","type","payload","Alerts","inputRef","alertReminders","setAlertReminders","useReducer","orders","dispatch","addAlert","input","current","alertPrice","value","removeAlert","i","newAlerts","filter","_","alertIndex","useEffect","ws","WebSocket","onopen","send","JSON","stringify","event","channel","pair","onmessage","msg","response","parse","data","isAnOrder","time","format","price","toFixed","amount","order","close","heady","newPrice","forEach","p","j","console","log","className","length","bell","reverse","map","alert"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from \"moment\";\nimport './Apping.css';\nimport './orderbook.css';\nimport './pricealert.css';\nimport { useState, useRef} from 'react';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ORDER\":\n      return [...state, action.payload];\n    default:\n      return state;\n  }\n}\n\nfunction Alerts() {\n  const inputRef = React.useRef();\n  const [alertReminders, setAlertReminders] = React.useState([]);\n  const [orders, dispatch] = React.useReducer(reducer, []);\n\n\n  \n  \n  // const [isShake, setShake] = useState(true)\n\n  const addAlert = () => {\n    const input = inputRef.current;\n    const alertPrice = input.value;\n    \n   \n      setAlertReminders([...alertReminders, alertPrice]);\n    \n\n    input.value = ''\n  };\n\n\n  const removeAlert = (i) => {\n    const newAlerts = alertReminders.filter((_, alertIndex) => alertIndex !== i)\n    setAlertReminders(newAlerts);\n\n  };\n\n  React.useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(\n        JSON.stringify({\n          event: \"subscribe\",\n          channel: \"trades\",\n          pair: \"tBTCUSD\"\n        })\n      );\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      var isAnOrder = response[1] === \"tu\";\n\n      if (isAnOrder) {\n        const time = moment().format(\"HH:mm:ss\");\n        const price = response[5].toFixed(1);\n        const amount = response[6].toFixed(5);\n\n        const order = { time, price, amount };\n          \n        dispatch({ type: \"ADD_ORDER\", payload: order })\n  \n        return () => ws.close(1000, 'Deliberate disconnection')\n      }\n    };\n  }, []);\n \n  // orders.forEach(element => { console.log('the price', element.price, element) })\n\n\n  const heady = useRef();\n\n  let newPrice = '';\n\n \n  \n  // 2-d array\n  orders.forEach(p => {\n  alertReminders.forEach(j => {\n  if (p.price - j <  100){\n    console.log(j);\n    console.log(p.price);\n  heady.current.className = 'fa fa-bell shake'\n  //       console.log(heady.current.className)\n\n  // window.alert(\"the price is\");\n\n      // heady.current.style.animation = 'shaking 0.5s'\n      // heady.current.style.transition = 'width 300px';\n      // heady.current.style.color =  'red'\n        \n  }\n  }) \n  })\n       \n  if(orders.length > 9){\n    orders.length = orders.length - 1;\n  };\n\n  const bell = heady.current.className = 'fa fa-bell'\n  return (\n    <div className=\"orders-Alerts\">\n      <section> \n      <i ref={heady} className={bell} aria-hidden=\"true\"></i>\n      <p>{newPrice} </p>\n      </section>\n     \n      <div className=\"Alertbox\">\n        <div className=\"Header\">\n          <h4>Add Alert</h4>\n          <input className=\"Myinput\" ref={inputRef} placeholder=\" price for alert\" />\n          <button className=\"Addbtn\" onClick={addAlert}>Add</button>\n        </div>\n\n        <ul className=\"Inneralert\">\n          {alertReminders.reverse().map((alert, i) => (\n            <li className=\"Myli\" key={i}>{ alert }\n              <button className=\"Removebtn\" onClick={() => removeAlert(i)}>x</button>\n            </li>\n          ))}\n        </ul>\n\n      </div>\n\n      <div className=\"Orderbook\">\n        <h4> Bitfinex BTC order book</h4>\n        <table>\n          <thead>\n            <tr>\n              <th>Time </th>\n              <th>Price</th>\n              <th>Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.reverse().map(({ time, price, amount }, i) => (\n              <tr key={i}>\n                \n                <td> {time} </td><td>{price}</td><td>{amount}</td>\n                \n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default Alerts;"]},"metadata":{},"sourceType":"module"}