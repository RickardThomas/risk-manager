{"ast":null,"code":"import _slicedToArray from \"/Users/tom/Desktop/booky-simple/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/tom/Desktop/booky-simple/src/Components/Orderbook.jsx\";\nimport React from 'react';\nimport moment from \"moment\";\nimport './orderbook.css';\nimport './pricealert.css';\n\nfunction reducer(state, action) {\n  return [...state, action.payload];\n}\n\nfunction Orderbook() {\n  // const [alertReminders, setAlertReminders] = React.useState([]);\n  const _useReducer = useReducer(reducer, []),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        order = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  React.useEffect(() => {\n    const ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(JSON.stringify({\n        event: \"subscribe\",\n        channel: \"trades\",\n        pair: \"tBTCUSD\"\n      }));\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      var isAnOrder = response[1] === \"tu\";\n\n      if (isAnOrder) {\n        const time = moment().format(\"hh:mm:ss\");\n        const price = response[5].toFixed(0);\n        const amount = response[6].toFixed(5);\n        const order = {\n          time,\n          price,\n          amount\n        };\n        dispatch({\n          type: \"ADD_ORDER\",\n          payload: order\n        });\n      }\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"order-alert-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"orderbook\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"titling\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \" Bitfinex BTC order book\"), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Time \"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Price\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Amount\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, order.map(({\n    time,\n    price,\n    amount\n  }, i) => React.createElement(\"tr\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \" \", time, \" \"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, price), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, amount)))))));\n}\n\nexport default Orderbook;","map":{"version":3,"sources":["/Users/tom/Desktop/booky-simple/src/Components/Orderbook.jsx"],"names":["React","moment","reducer","state","action","payload","Orderbook","useReducer","order","dispatch","useEffect","ws","WebSocket","onopen","send","JSON","stringify","event","channel","pair","onmessage","msg","response","parse","data","isAnOrder","time","format","price","toFixed","amount","type","map","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from \"moment\";\n\nimport './orderbook.css';\nimport './pricealert.css';\n\nfunction reducer(state, action) {\n\n  return [...state, action.payload];\n}\n\nfunction Orderbook() {\n\n  // const [alertReminders, setAlertReminders] = React.useState([]);\n  const [order, dispatch] = useReducer(reducer, []);\n\n  React.useEffect(() => {\n    const ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(\n        JSON.stringify({\n          event: \"subscribe\",\n          channel: \"trades\",\n          pair: \"tBTCUSD\"\n        })\n      );\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      var isAnOrder = response[1] === \"tu\";\n\n      if (isAnOrder) {\n        const time = moment().format(\"hh:mm:ss\");\n        const price = response[5].toFixed(0);\n        const amount = response[6].toFixed(5);\n\n        const order = { time, price, amount };\n\n        dispatch({ type: \"ADD_ORDER\", payload: order })\n  \n      }\n    };\n  }, []);\n  \n  return (\n    <div className=\"order-alert-box\">\n\n      <div className=\"orderbook\">\n        <h4 className=\"titling\"> Bitfinex BTC order book</h4>\n        <table>\n          <thead>\n            <tr>\n              <th>Time </th>\n              <th>Price</th>\n              <th>Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            {order.map(({ time, price, amount }, i) => (\n              <tr  key={i}>\n                <td> {time} </td><td>{price}</td><td>{amount}</td>\n                \n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default Orderbook;"]},"metadata":{},"sourceType":"module"}