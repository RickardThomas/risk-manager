{"ast":null,"code":"import _slicedToArray from \"/Users/tom/Desktop/interval-random/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/tom/Desktop/interval-random/src/Components/Trade.jsx\";\nimport React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from \"moment\";\nimport \"./styles.css\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ALERT\":\n      return [...state, action.payload];\n\n    default:\n      return state;\n  }\n}\n\nexport default function Trade() {\n  const inputRef = React.useRef();\n\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        alertReminders = _React$useState2[0],\n        setAlertReminders = _React$useState2[1];\n\n  const _React$useReducer = React.useReducer(reducer, []),\n        _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n        alerts = _React$useReducer2[0],\n        dispatch = _React$useReducer2[1];\n\n  const addAlert = () => {\n    const input = inputRef.current;\n    const alertPrice = input.value;\n    setAlertReminders([...alertReminders, alertPrice]);\n  };\n\n  useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(JSON.stringify({\n        event: \"subscribe\",\n        channel: \"trades\",\n        pair: \"tBTCUSD\"\n      }));\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data); // var isAnOrder = response[1] === \"tu\";\n\n      const time = moment().format(\"HH:mm:ss\"); // const price = Number(response[5].toFixed(0));\n\n      const price = response[5].toFixed(0);\n      const amount = response[6].toFixed(5);\n      var alert = {\n        time,\n        price,\n        amount\n      };\n      dispatch({\n        type: \"ADD_ALERT\",\n        payload: alert\n      });\n    };\n  }, []);\n\n  const check = (price, alertPrice) => {\n    if (price === alertPrice) {\n      window.alert(\"HEY!\");\n    }\n  };\n\n  alertReminders.forEach(check);\n  console.log(typeof price);\n  console.log(alertReminders[0]);\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    ref: inputRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: addAlert,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Add alert\"), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, alertReminders.map((alert, i) => React.createElement(\"li\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, alert))), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, alerts.map(({\n    time,\n    price,\n    amount\n  }, i) => React.createElement(\"li\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Date \", time, \", Value \", price, \", Amount \", amount)))));\n}","map":{"version":3,"sources":["/Users/tom/Desktop/interval-random/src/Components/Trade.jsx"],"names":["React","useEffect","ReactDOM","moment","reducer","state","action","type","payload","Trade","inputRef","useRef","useState","alertReminders","setAlertReminders","useReducer","alerts","dispatch","addAlert","input","current","alertPrice","value","ws","WebSocket","onopen","send","JSON","stringify","event","channel","pair","onmessage","msg","response","parse","data","time","format","price","toFixed","amount","alert","check","window","forEach","console","log","display","justifyContent","map","i"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from \"moment\";\n\nimport \"./styles.css\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ALERT\":\n      return [...state, action.payload];\n    default:\n      return state;\n  }\n}\n\nexport default function Trade() {\n  const inputRef = React.useRef();\n  const [alertReminders, setAlertReminders] = React.useState([]);\n  const [alerts, dispatch] = React.useReducer(reducer, []);\n\n  const addAlert = () => {\n    const input = inputRef.current;\n    const alertPrice = input.value;\n\n    setAlertReminders([...alertReminders, alertPrice]);\n\n  };\n\n  useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function() {\n      ws.send(\n        JSON.stringify({\n          event: \"subscribe\",\n          channel: \"trades\",\n          pair: \"tBTCUSD\"\n        })\n      );\n    };\n\n    ws.onmessage = function(msg) {\n      var response = JSON.parse(msg.data);\n      // var isAnOrder = response[1] === \"tu\";\n\n        const time = moment().format(\"HH:mm:ss\");\n        // const price = Number(response[5].toFixed(0));\n        const price = response[5].toFixed(0);\n        const amount = response[6].toFixed(5)\n\n        var alert = { time, price, amount };\n        dispatch({ type: \"ADD_ALERT\", payload: alert });\n      \n    };\n  }, []);\n\n  const check = (price, alertPrice) => {\n    if (price === alertPrice) {\n      window.alert(\"HEY!\");\n    }\n  }\n  alertReminders.forEach(check);\n\n  console.log(typeof price);\n  console.log(alertReminders[0]);\n\n  return (\n    <div className=\"App\">\n      <input ref={inputRef} />\n\n      <button onClick={addAlert}>Add alert</button>\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n        <ul>\n          {alertReminders.map((alert, i) => (\n            <li key={i}>{alert}</li>\n          ))}\n        </ul>\n        <ul>\n          {alerts.map(({ time, price, amount }, i) => (\n            <li key={i}>\n             \n                Date {time}, Value {price}, Amount {amount}\n            \n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}