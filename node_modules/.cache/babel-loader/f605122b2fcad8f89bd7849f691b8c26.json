{"ast":null,"code":"import _slicedToArray from \"/Users/tom/Desktop/interval-random/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/tom/Desktop/interval-random/src/Components/Trade.jsx\";\nimport React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from \"moment\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ALERT\":\n      return [...state, action.payload];\n\n    default:\n      return state;\n  }\n}\n\nexport default function Trade() {\n  useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function () {\n      ws.send(JSON.stringify({\n        event: \"subscribe\",\n        channel: \"trades\",\n        pair: \"tBTCUSD\"\n      }));\n    };\n\n    ws.onmessage = function (msg) {\n      var response = JSON.parse(msg.data);\n      var isAnOrder = response[1] === \"tu\";\n\n      if (isAnOrder) {\n        var time = moment().format(\"HH:mm:ss\");\n        var price = response[5].toFixed(1);\n        var amount = response[6].toFixed(5);\n        var alert = {\n          time,\n          price,\n          amount\n        };\n        const inputRef = React.useRef();\n\n        const _React$useState = React.useState([]),\n              _React$useState2 = _slicedToArray(_React$useState, 2),\n              alertReminders = _React$useState2[0],\n              setAlertReminders = _React$useState2[1];\n\n        const _React$useReducer = React.useReducer(reducer, []),\n              _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n              alerts = _React$useReducer2[0],\n              dispatch = _React$useReducer2[1];\n\n        const addAlert = () => {\n          const input = inputRef.current;\n          const alertPrice = input.value;\n          setAlertReminders([...alertReminders, alertPrice]);\n        };\n\n        alertReminders.forEach(p => {\n          if (Math.abs(p - price) % 500) {\n            window.alert(\"HEY!\");\n          }\n        });\n        dispatch({\n          type: \"ADD_ALERT\",\n          payload: alert\n        });\n      }\n    };\n  }, []); //     ws.onmessage = function(msg) {\n  //       var response = JSON.parse(msg.data);\n  //       // var isAnOrder = response[1] === \"tu\";\n  //         const time = moment().format(\"HH:mm:ss\");\n  //         // const price = Number(response[5].toFixed(0));\n  //         const price = response[5];\n  //         const amount = response[6];\n  //         var alert = { time, price, amount };\n  //         dispatch({ type: \"ADD_ALERT\", payload: alert });\n  //     };\n  //   }, []);\n  //   const check = (price, alertPrice) => {\n  //     if (price === alertPrice) {\n  //       window.alert(\"HEY!\");\n  //     }\n  //   }\n  //   alertReminders.forEach(check);\n  //   console.log(typeof price);\n  //   console.log(alertReminders[0]);\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    ref: inputRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: addAlert,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Add alert\"), React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, alertReminders.map((alert, i) => React.createElement(\"li\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, alert))), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, alerts.map(({\n    time,\n    price,\n    amount\n  }, i) => React.createElement(\"li\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Date \", time, \", Value \", price, \", Amount \", amount))))));\n}","map":{"version":3,"sources":["/Users/tom/Desktop/interval-random/src/Components/Trade.jsx"],"names":["React","useEffect","ReactDOM","moment","reducer","state","action","type","payload","Trade","ws","WebSocket","onopen","send","JSON","stringify","event","channel","pair","onmessage","msg","response","parse","data","isAnOrder","time","format","price","toFixed","amount","alert","inputRef","useRef","useState","alertReminders","setAlertReminders","useReducer","alerts","dispatch","addAlert","input","current","alertPrice","value","forEach","p","Math","abs","window","display","justifyContent","map","i"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from \"moment\";\n\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"ADD_ALERT\":\n      return [...state, action.payload];\n    default:\n      return state;\n  }\n}\n\nexport default function Trade() {\n\n  useEffect(() => {\n    var ws = new WebSocket(\"wss://api.bitfinex.com/ws\");\n\n    ws.onopen = function() {\n      ws.send(\n        JSON.stringify({\n          event: \"subscribe\",\n          channel: \"trades\",\n          pair: \"tBTCUSD\"\n        })\n      );\n    };\n\n\n    ws.onmessage = function(msg) {\n        var response = JSON.parse(msg.data);\n        var isAnOrder = response[1] === \"tu\";\n  \n        if (isAnOrder) {\n          var time = moment().format(\"HH:mm:ss\");\n  \n          var price = response[5].toFixed(1);\n          var amount = response[6].toFixed(5);\n  \n          var alert = { time, price, amount };\n\n          const inputRef = React.useRef();\n          const [alertReminders, setAlertReminders] = React.useState([]);\n          const [alerts, dispatch] = React.useReducer(reducer, []);\n        \n          const addAlert = () => {\n            const input = inputRef.current;\n            const alertPrice = input.value;\n        \n            setAlertReminders([...alertReminders, alertPrice]);\n        \n          };\n  \n          alertReminders.forEach(p => {\n            if (Math.abs(p - price) % 500) {\n              window.alert(\"HEY!\");\n            }\n          });\n  \n          dispatch({ type: \"ADD_ALERT\", payload: alert });\n        }\n      };\n    }, []);\n\n\n//     ws.onmessage = function(msg) {\n//       var response = JSON.parse(msg.data);\n//       // var isAnOrder = response[1] === \"tu\";\n\n//         const time = moment().format(\"HH:mm:ss\");\n//         // const price = Number(response[5].toFixed(0));\n//         const price = response[5];\n//         const amount = response[6];\n\n//         var alert = { time, price, amount };\n//         dispatch({ type: \"ADD_ALERT\", payload: alert });\n      \n//     };\n//   }, []);\n\n//   const check = (price, alertPrice) => {\n//     if (price === alertPrice) {\n//       window.alert(\"HEY!\");\n//     }\n//   }\n//   alertReminders.forEach(check);\n\n//   console.log(typeof price);\n//   console.log(alertReminders[0]);\n\n  return (\n    <div className=\"App\">\n      <input ref={inputRef} />\n\n      <button onClick={addAlert}>Add alert</button>\n      <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n        <ul>\n          {alertReminders.map((alert, i) => (\n            <li key={i}>{alert}</li>\n          ))}\n        </ul>\n        <ul>\n          {alerts.map(({ time, price, amount }, i) => (\n            <li key={i}>\n             \n             <p>\n                Date {time}, Value {price}, Amount {amount}\n              </p>\n            \n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}